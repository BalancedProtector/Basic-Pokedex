let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("pokemon is not correct")}function n(){return e}function i(e){l(e).then(function(){let t=document.querySelector("#pokedexInfo");t.innerHTML="";let n=document.createElement("div");n.classList.add("modal");let i=document.createElement("button");i.classList.add("pokedexClose"),i.innerText="X",i.addEventListener("click",m);let l=document.createElement("h1");l.innerText=e.name;let a=document.createElement("p");a.innerHTML+="Height: "+e.height+"<br>",a.innerHTML+="\nWeight: "+e.weight+"<br>";let o="Types:  ";for(let r=0;r<e.types.length;r++)o+=e.types[r],r!==e.types.length-1&&(o+=", ");a.innerHTML+="\n"+o;let s="Abilities: ";for(let p=0;p<e.abilities.length;p++)s+=e.abilities[p],p!==e.abilities.length-1&&(s+=", ");a.innerText+="\n"+s;let d=document.createElement("img");d.src=e.imageUrlFront;let c=document.createElement("img");function m(){t.classList.remove("is-visible")}c.src=e.imageUrlBack,n.appendChild(i),n.appendChild(l),n.appendChild(a),n.appendChild(d),n.appendChild(c),t.appendChild(n),t.classList.add("is-visible"),document.querySelector("#pokedexEntry").addEventListener("click",function(e){e.target===t&&m()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("is-visible")&&m()})})}function l(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrlFront=t.sprites.front_default,e.imageUrlBack=t.sprites.back_default,e.height=t.height,e.types=t.types.map(function(e){return e.type.name}),e.weight=t.weight,e.abilities=t.abilities.map(function(e){return e.ability.name})}).catch(function(e){console.error(e)})}return{getAll:n,add:t,addListItem:function e(t){let n=document.querySelector(".pokemonList"),l=document.createElement("li"),a=document.createElement("button");a.innerText=t.name,a.classList.add("pokedexEntry"),a.addEventListener("click",function(e){i(t)}),l.appendChild(a),n.appendChild(l)},loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:l,showDetails:i,showModal:function e(t){let n=$(".modal-body"),i=$(".modal-title");$(".modal-header").empty(),i.empty(),n.empty();let l=$("<h1>"+t.name+"<h1>"),a=$("<img class='model-img' style='width:100%'>");a.attr("src",t.imageUrlFront);let o=$("<img class='model-img' style='width:100%'>");o.attr("src",t.imageUrlBack);let r=$("<p>Height: "+t.height+"</p>"),s=$("<p>Weight: "+t.weight+"</p>"),p=$("<p>Types: "+t.types.join("<br>")+"</p>"),d=$("<p>Abilities: "+t.abilities.join("<br>")+"</p>");i.append(l),n.append(a),n.append(o),n.append(r),n.append(s),n.append(p),n.append(d)}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});